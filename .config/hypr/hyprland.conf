# Learn how to configure Hyprland: https://wiki.hyprland.org/Configuring/

# --- 1. CRITICAL SYSTEM STARTUP (Immediate) ---
# These MUST happen first so other apps know they are in a Wayland session
exec-once = dbus-update-activation-environment --systemd --all
exec-once = systemctl --user import-environment QT_QPA_PLATFORMTHEME WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1

# --- 2. NVIDIA & ENVS (Immediate) ---
env = LIBVA_DRIVER_NAME,nvidia
env = __GLX_VENDOR_LIBRARY_NAME,nvidia
env = NVD_BACKEND,direct
env = ELECTRON_OZONE_PLATFORM_HINT,auto
env = __NV_PRIME_RENDER_OFFLOAD,1

# --- 3. CORE UI (Immediate) ---
# You want your bar and wallpaper to appear instantly so the system "feels" ready
exec-once = uwsm-app -- waybar
exec-once = uwsm-app -- swaybg -i ~/.config/omarchy/current/background -m fill
exec-once = swaync
exec-once = uwsm-app -- swayosd-server

# --- 4. BACKGROUND UTILITIES (Slight Delay) ---
# These can wait 1-2 seconds while the CPU finishes the UI
exec-once = uwsm-app -- hypridle
exec-once = uwsm-app -- fcitx5

exec-once = omarchy-cmd-first-run

layerrule = blur, swaync-control-center
layerrule = blur, swaync-notification-window

layerrule = ignorezero, swaync-control-center
layerrule = ignorezero, swaync-notification-window

layerrule = ignorealpha 0.5, swaync-control-center
layerrule = ignorealpha 0.5, swaync-notification-window

# Launch apps directly into workspaces
exec-once = [workspace 1] firefox
exec-once = [workspace 2] ghostty
exec-once = [workspace 3] vesktop --start-minimized
exec-once = [workspace 4] spotify

windowrulev2 = workspace 1, class:^(firefox)$
windowrulev2 = workspace 2, class:^(ghostty)$
windowrulev2 = workspace 3, class:^(vesktop)$
windowrulev2 = workspace 4, class:^(spotify)$


# Use defaults Omarchy defaults (but don't edit these directly!)
#source = ~/.local/share/omarchy/default/hypr/autostart.conf
source = ~/.local/share/omarchy/default/hypr/bindings/media.conf
source = ~/.local/share/omarchy/default/hypr/bindings/clipboard.conf
source = ~/.local/share/omarchy/default/hypr/bindings/tiling-v2.conf
source = ~/.local/share/omarchy/default/hypr/bindings/utilities.conf
source = ~/.local/share/omarchy/default/hypr/envs.conf
source = ~/.local/share/omarchy/default/hypr/looknfeel.conf
source = ~/.local/share/omarchy/default/hypr/input.conf
source = ~/.local/share/omarchy/default/hypr/windows.conf
source = ~/.config/omarchy/current/theme/hyprland.conf

#Change your own setup in these files (and overwrite any settings from defaults!)
source = ~/.config/hypr/monitors.conf
source = ~/.config/hypr/input.conf
source = ~/.config/hypr/bindings.conf
source = ~/.config/hypr/looknfeel.conf
source = ~/.config/hypr/autostart.conf

# Add any other personal Hyprland configuration below
# windowrule = workspace 5, class:qemu

# NVIDIA environment variables
#env = NVD_BACKEND,direct
#env = LIBVA_DRIVER_NAME,nvidia
#env = __GLX_VENDOR_LIBRARY_NAME,nvidia
#env = ELECTRON_OZONE_PLATFORM_HINT,auto

